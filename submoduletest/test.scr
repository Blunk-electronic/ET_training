# domain module verb noun parameter[s]

# set domain schematic
# set module submoduletest

# supported commands:

# delete
# schematic submoduletest delete device R1
# schematic submoduletest delete unit R1 1

# move
# schematic submoduletest move unit R1 1 absolute 2 210 100 # R1 unit sheet x y
# schematic submoduletest move unit R1 1 relative -1 2 4 # IC1 unit B sheet dx dy
# schematic submoduletest move name R1 1 relative 1 -4 # R1 unit 1 dx dy
# schematic submoduletest move name R1 1 absolute 210 115 # R1 unit 1 x y
# schematic submoduletest move value R1 1 relative 1 -4 # R1 unit 1 dx dy
# schematic submoduletest move value R1 1 absolute 210 115 # R1 unit x y
# schematic submoduletest move purpose R1 1 relative 1 -4 # R1 unit 1 dx dy
# schematic submoduletest move purpose R1 1 absolute 210 115 # R1 unit x y

# rotate
# schematic submoduletest rotate unit R1 1 absolute -270
# schematic submoduletest rotate unit R1 1 relative 90
# schematic submoduletest rotate name R1 1 0
# schematic submoduletest rotate value R1 1 90
# schematic submoduletest rotate purpose R1 1 0

# drag
# schematic submoduletest drag unit R1 1 absolute 220 100 # R1 unit x y
# schematic submoduletest drag unit R1 1 relative 10 0 # IC1 unit B x y

# junction
# schematic submoduletest place junction 1 230 100 # sheet x y

# rename
# schematic submoduletest rename device R1 R100

# set value, purpose, partcode of a device
# schematic submoduletest set value R1 2k2
# schematic submoduletest set purpose R1 "brightnesss_control"
# schematic submoduletest set partcode R1 R_PAC_S_0805_VAL_100R

# add device or unit
# schematic submoduletest add device $HOME/git/BEL/ET_component_library/devices/passive/resistors/R.dev 1 210 150 90 S_0805 # sheet 1 x y rotation [variant]
# schematic submoduletest add device $HOME/git/BEL/ET_component_library/devices/active/logic/7400.dev 1 250 150 90 D # sheet 1 x y rotation [variant]
# schematic submoduletest add device $HOME/git/BEL/ET_component_library/devices/active/logic/7400.dev 2 250 150 0 D # sheet 1 x y rotation [variant]
# schematic submoduletest add device $HOME/git/BEL/ET_component_library/devices/active/logic/7400_ext.dev 1 250 150 90 D
# schematic submoduletest invoke unit IC1 B 1 60 90 0 # device unit sheet x y rotation
# schematic submoduletest invoke unit IC1 P 4 60 90 0 # device unit sheet x y rotation

# nets
#schematic submoduletest rename net motor_on motor_on_n # on all sheets
#schematic submoduletest rename net motor_on motor_on_n 1 # only on sheet 2
#schematic submoduletest rename net motor_on motor_on_n 3 100 100 # only on sheet 2 strand starting at point 30 45

# schematic submoduletest delete net motor_on # on all sheets
# schematic submoduletest delete net motor_on 3 # only on sheet 3
# schematic submoduletest delete net motor_on 3 100 100 # only on sheet 3 strand starting at point 100 100
# schematic submoduletest delete net motor_on_res 1 220 100
# schematic submoduletest delete segment motor_on 1 120 100 # segment on sheet 1 crossing point 120 100
# schematic submoduletest delete segment motor_on 1 200 130
# schematic submoduletest delete segment motor_on 3 200 130
# schematic submoduletest delete segment motor_on 3 120 100

# Dragging a net segment requires the net name, sheet and point of attack.
# Dragging requires further-on an argument for relative/absolute movement followed by the x and y position.
# If movement is relative, x and y are handled as difference.
# In the example below the net motor_on is attacked on sheet 1 at x/y 120/100. The point 120/100
# is close to start point. So the start point will be dragged by dx/dy of 0/10.
# The decision whether the start or end point (or both) will be dragged depends on the point of attack.
# If the start or end point is tied to any port, no dragging will be performed.
# Absolute dragging with the center of the segment is not supported.

# schematic submoduletest add device $HOME/git/BEL/ET_component_library/devices/passive/resistors/R.dev 1 90 100 0 S_0805
# schematic submoduletest add device $HOME/git/BEL/ET_component_library/devices/passive/resistors/R.dev 1 90  90 0 S_0805

# schematic submoduletest drag segment motor_on 1 110 100 relative 0 -10 # point of attack 110 100 by dx dy
# schematic submoduletest drag segment motor_on 1 110 89 relative 0 10 # point of attack 120 100 by dx dy
# schematic submoduletest drag segment motor_on 1 120 100 absolute 90 105 # drag net segment to x y

schematic submoduletest add device $HOME/git/BEL/ET_component_library/devices/passive/resistors/R.dev 1 0 40 0 S_0805
schematic submoduletest add device $HOME/git/BEL/ET_component_library/devices/passive/resistors/R.dev 1 210 140 0 S_0805

# draw net segment
# schematic submoduletest draw net motor_on 1 200 140 10 40 # net segment on sheet 1 from 230/150 to 10/40
# schematic submoduletest draw net motor_on 1 200 140 10 90 # net segment on sheet 1 from 230/150 to 10/40
# schematic submoduletest draw net motor_on 1 200 300 300 300 # net segment on sheet 1 from 230/150 to 10/40
# schematic submoduletest draw net motor_on 1 220 300 200 140 # net segment on sheet 1 from 230/150 to 10/40

# netchangers
schematic submoduletest add netchanger 1 90 100 0 # sheet 1 x/y 90/100 rotation 0
schematic submoduletest delete netchanger 1

# check
schematic submoduletest check integrity



# not supported yet:

# schematic submoduletest drag netchanger 12 absolute 220 100
# schematic submoduletest move netchanger 12 absolute 2 220 100
# schematic submoduletest rotate netchanger 12 absolute 90


# schematic submoduletest add submodule OSC 2 50 60
# schematic submoduletest move port OSC absolute 30 60
# schematic submoduletest move submodule OSC absolute 2 210 100
# schematic submoduletest move submodule OSC relative 0 10 -15
# schematic submoduletest delete submodule OSC

# schematic submoduletest move netchanger 45 absolute 2 210 100
# schematic submoduletest move netchanger 45 relative 0 10 -15
# schematic submoduletest delete netchanger 45

# schematic submoduletest move label CLK 2 30 40 30 50 rel 0 10 # move net segment dx dy

# schematic submoduletest move net CLK 2 30 40 rel 0 5 # move point on net dx dy

# 
# schematic submoduletest write text 2 50 50 "hello"
# schematic submoduletest move text 2 50 50 rel 10 0 
# schematic submoduletest delete text 2 60 50
# schematic submoduletest rotate text 2 50 50 abs -45
# schematic submoduletest set text_size 2 50 50 6 # 6mm
# 
# board submoduletest move device R1 33.0 23.0
# board submoduletest move device R1 rel 1.3 0
# board submoduletest move name R1 rel 1.3 0
# board submoduletest move purpose R1 rel 1.3 0
# board submoduletest flip device R2
# board submoduletest rotate device R2 abs 45.0
# 
# board submoduletest place via 3.3 4.6 0.25 5-9 CLK # x y diameter layers net_name
# board submoduletest move via 3.3 4.6 1-2 rel 1 0
# board submoduletest set via_drill 3.3 4.6 1-2 0.3
# board submoduletest ripup via 3.3 4.6 1-2
# 
# board submoduletest route net CLK 0.15 1 20.0 10.0 20.0 20.0 # width 0.15 layer 1 from 20/10 to 20/20
# board submoduletest ripup net CLK 1 25.0 15.0 # layer 1 x y
# board submoduletest ripup net CLK 
# 
# board submoduletest write text silk_screen 50 50 "hello"
# board submoduletest move text silk_screen 50 50 rel 1 0
# board submoduletest set text_size silk_screen 50 50 3 # 3mm
# board submoduletest set text_line_width silk_screen 50 50 0.2 # 0.2mm
# board submoduletest flip text silk_screen 50 50
# 
# board submoduletest move device_name R1 rel 1 0
# board submoduletest move device_purpose R1 rel 0 1

# schematic submoduletest set device_accessory clamp SAP1701

# script end
